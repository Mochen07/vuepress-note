# kzl-v3独立总结

主要是想写一下开发的注意事项，还有就是测试重点。

## 开发的注意事项

### 关于代码同步

v2后台代码，查看的当前[需要合并的内容](http://git.int.kzl.com.cn/k/cater-source/compare/fea/v3_add_v2_before...fea/print_manage)。根据当前的差异同步平移。

### 安装依赖失败

v3的webpack版本升级后安装依赖报错，需要python环境，可以到[python官网下载](https://www.python.org/downloads/release/python-2716/)对应的版本安装。

## 测试重点

`v2`、`v3`分别代表`cater-source`、`wzl-cater-h5`。

v2页面涉及**批量替换**。只是换了名字，代码没动。（请求接口的baseUrl和全局组件名称修改）

v3页面代码基本**没有改动**。

v2、v3页面可能会有**全局数据、iframe的交互、样式的问题**。

可以参考后台页面路由的整理[文档](https://w4ib2x4t86.feishu.cn/sheets/L4pEssEBkhvZN1tHDk4cVhXon4d)。

### 全局数据

1. v2操作的数据状态v3**是否保持一致**，反知亦然，比如说门店/品牌/连锁的切换、门店营业状态的改变等。（iframe的交互修改）

1. 当前操作页面**新窗口打开**数据是否显示正常，比如用户管理里面的用户详情。

1. **页面刷新/切换**是否存在全局数据丢失的情况，比如说登陆信息，门店连锁选择状态，一些特定的显示页面等。（403、白屏）

1. 后台长时间未操作的页面白屏问题。

1. 路由完整，是否有页面丢失。

### iframe的交互

1. v2与v3全局数据交换方法修改。（用户信息、门店/品牌/连锁信息、门店营业状态、新旧打印版本等）

1. 菜单页面的跳转。（主要是v2跳转v3页面，或者v3跳v2）

1. 报表中心-订单管理-订单记录 里面的订单详情弹窗。

1. 运营中心-财务管理-电子发票管理 左侧菜单待办数字显示。

1. 弹窗遮罩。（之前是v3、v2两层来着，现在屏蔽了v2一层）

1. 侧边回到旧版 方法交互。

### 样式

v2、v3可能存在部分全局样式冲突会影响页面显示。以下是发现的比较突出的问题

- v2页面背景颜色是灰的，v3页面背景是白的也可能是灰色问题兼容。

- v3、v2页面字体深浅粗细不一致，统一成v2。（-webkit-font-smoothing: antialiased; 这个属性可以使字体的边缘看起来更加平滑和清晰）

- 页面筛选（inline-form）显示重叠。
